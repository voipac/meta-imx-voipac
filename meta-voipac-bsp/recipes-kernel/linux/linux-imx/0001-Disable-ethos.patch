From 5d3c372a51ba318abc1e6f8607d18be5b20d8374 Mon Sep 17 00:00:00 2001
From: Marek Belisko <marek.belisko@gmail.com>
Date: Thu, 16 May 2024 21:12:50 +0200
Subject: [PATCH] Disable ethos

Signed-off-by: Marek Belisko <marek.belisko@gmail.com>
---
 .../dts/freescale/imx93-11x11-evk-rpmsg.dts   |  1 -
 .../boot/dts/freescale/imx93-11x11-evk.dts    | 26 +++----------------
 2 files changed, 4 insertions(+), 23 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/imx93-11x11-evk-rpmsg.dts b/arch/arm64/boot/dts/freescale/imx93-11x11-evk-rpmsg.dts
index 3627491cd1ea..a52c030ef247 100644
--- a/arch/arm64/boot/dts/freescale/imx93-11x11-evk-rpmsg.dts
+++ b/arch/arm64/boot/dts/freescale/imx93-11x11-evk-rpmsg.dts
@@ -6,7 +6,6 @@
 #include "imx93-11x11-evk.dts"
 
 /delete-node/ &lpi2c1;
-/delete-node/ &ethosu_mem;
 
 / {
 	/delete-node/ ethosu;
diff --git a/arch/arm64/boot/dts/freescale/imx93-11x11-evk.dts b/arch/arm64/boot/dts/freescale/imx93-11x11-evk.dts
index 09c4f189b543..e82bc8940ea7 100644
--- a/arch/arm64/boot/dts/freescale/imx93-11x11-evk.dts
+++ b/arch/arm64/boot/dts/freescale/imx93-11x11-evk.dts
@@ -33,11 +33,6 @@ linux,cma {
 			linux,cma-default;
 		};
 
-		ethosu_mem: ethosu_region@C0000000 {
-			compatible = "shared-dma-pool";
-			reusable;
-			reg = <0x0 0xC0000000 0x0 0x10000000>;
-		};
 
 		vdev0vring0: vdev0vring0@a4000000 {
 			reg = <0 0xa4000000 0 0x8000>;
@@ -76,14 +71,7 @@ ele_reserved: ele-reserved@a4120000 {
 			no-map;
 		};
 	};
-
-	ethosu {
-		compatible = "arm,ethosu";
-		fsl,cm33-proc = <&cm33>;
-		memory-region = <&ethosu_mem>;
-		power-domains = <&mlmix>;
-	};
-
+	
 	reg_can2_stby: regulator-can2-stby {
 		compatible = "regulator-fixed";
 		regulator-name = "can2-stby";
@@ -791,9 +779,9 @@ &usdhc3 {
 	pinctrl-1 = <&pinctrl_usdhc3_100mhz>, <&pinctrl_usdhc3_wlan>;
 	pinctrl-2 = <&pinctrl_usdhc3_200mhz>, <&pinctrl_usdhc3_wlan>;
 	pinctrl-3 = <&pinctrl_usdhc3_sleep>, <&pinctrl_usdhc3_wlan>;
-	mmc-pwrseq = <&usdhc3_pwrseq>;
-	vmmc-supply = <&reg_usdhc3_vmmc>;
-	pinctrl-assert-gpios = <&pcal6524 13 GPIO_ACTIVE_HIGH>;
+	//mmc-pwrseq = <&usdhc3_pwrseq>;
+	//vmmc-supply = <&reg_usdhc3_vmmc>;
+	//pinctrl-assert-gpios = <&pcal6524 13 GPIO_ACTIVE_HIGH>;
 	bus-width = <4>;
 	keep-power-in-suspend;
 	non-removable;
@@ -801,12 +789,6 @@ &usdhc3 {
 	fsl,sdio-async-interrupt-enabled;
 	status = "okay";
 
-	wifi_wake_host {
-		compatible = "nxp,wifi-wake-host";
-		interrupt-parent = <&gpio3>;
-		interrupts = <26 IRQ_TYPE_LEVEL_LOW>;
-		interrupt-names = "host-wake";
-	};
 };
 
 &wdog3 {
-- 
2.25.1

